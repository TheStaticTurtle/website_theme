{{ $og_url := .Site.BaseURL }}

{{ if hasPrefix .Layout "portfolio" }}
    {{ $og_url = index .Site.Params "urls" "portfolio" }}
    {{ $path := replace .RelPermalink "portfolio/" "" }}
    {{ $path  = substr $path 1 }}
    {{ $og_url = print $og_url $path }}
{{ else }}
    {{ $og_url = .Permalink | default .Site.BaseURL }}
{{ end }}

{{ return $og_url }}